<!doctype html>
<html lang="es">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <link rel="stylesheet" href="./shared/ui.css?v=fb2" />
  <title>Fleteros · Local</title>
  <link rel="manifest" href="./manifest.webmanifest?v=pwa3">

  <meta name="apple-mobile-web-app-capable" content="yes" />
  <link rel="apple-touch-icon" href="./assets/icon-192.png" />
</head>
<body>
  <div class="wrap" style="max-width:980px">
    <div class="nav">
      <div class="brand"><div class="t">Fleteros</div><div class="s">Prueba Local</div></div>
      <div class="navActions">
        <button class="pill" id="btnInstall" type="button" style="cursor:pointer;border:0">Instalar</button><div class="pill"><span class="dot" style="background:rgba(23,178,106,.9)"></span><span>LocalStorage</span></div></div>
    </div>
    <div class="hero">
      <div class="heroTop">
        <div>
          <div class="hTitle">Prueba local (sin Firebase)</div>
          <div class="hSub">Panel asigna ruta. Fletero la ve y marca llegadas. El mapa muestra la última ubicación simulada.</div>
        </div>
      </div>
      <div class="row" style="margin-top:14px">
        <a class="btn btnPrimary" href="./panel/index.html" style="text-align:center; width:min(520px,100%)">Abrir Panel</a>
        <a class="btn btnGhost" href="./fletero/index.html" style="text-align:center; width:min(520px,100%)">Abrir Fletero</a>
      </div>
    </div>
  </div>

<script>
(function(){
  let dp=null;
  const b=document.getElementById('btnInstall');
  if(b) b.style.display='none';
  window.addEventListener('beforeinstallprompt',e=>{e.preventDefault();dp=e;if(b) b.style.display='inline-flex';});
  if(b) b.addEventListener('click',async()=>{if(dp){dp.prompt();try{await dp.userChoice;}catch{}dp=null;b.style.display='none';}else{alert('Usá el menú del navegador: “Agregar a pantalla principal”.');}});
  if('serviceWorker' in navigator) navigator.serviceWorker.register('./sw.js').catch(()=>{});
})();
</script>

</body>
</html>
